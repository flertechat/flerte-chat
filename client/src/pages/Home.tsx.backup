import { useAuth } from "@/_core/hooks/useAuth";
import { Button } from "@/components/ui/button";
import { APP_LOGO, APP_TITLE, getLoginUrl } from "@/const";
import { Sparkles, MessageCircle, Zap, Heart, Check, Star, TrendingUp, Moon } from "lucide-react";
import { useLocation } from "wouter";
import { useScrollAnimation } from "@/hooks/useScrollAnimation";
import { BackToTop } from "@/components/BackToTop";
import { useTheme } from "@/contexts/ThemeContext";

export default function Home() {
  const { isAuthenticated } = useAuth();
  const { cycleTheme } = useTheme();
  const [, setLocation] = useLocation();
  
  // Refs for scroll animations
  const heroRef = useScrollAnimation<HTMLDivElement>();
  const statsRef = useScrollAnimation<HTMLDivElement>();
  const howItWorksRef = useScrollAnimation<HTMLDivElement>();
  const whyChooseRef = useScrollAnimation<HTMLDivElement>();
  const testimonialsRef = useScrollAnimation<HTMLDivElement>();
  const ctaRef = useScrollAnimation<HTMLDivElement>();

  const handleGetStarted = () => {
    if (isAuthenticated) {
      setLocation("/app");
    } else {
      window.location.href = getLoginUrl();
    }
  };

  return (
    <div className="min-h-screen bg-gray-50">
      {/* Header */}
      <header className="bg-white shadow-sm sticky top-0 z-50">
        <div className="container max-w-7xl mx-auto px-4 py-4 flex items-center justify-between">
          <div className="flex items-center">
            <img src={APP_LOGO} alt="FlerteChat" className="h-10 object-contain logo-pulse" />
          </div>
          <div className="flex items-center gap-6">
            <a href="#como-funciona" className="text-gray-700 hover:text-gray-900 text-sm font-medium border-b-2 border-dotted border-transparent hover:border-gray-400 transition-all">
              Como funciona?
            </a>
            <a href="#faq" className="text-gray-700 hover:text-gray-900 text-sm font-medium border-b-2 border-dotted border-transparent hover:border-gray-400 transition-all">
              Perguntas frequentes
            </a>
            <a href="#avaliacoes" className="text-gray-700 hover:text-gray-900 text-sm font-medium border-b-2 border-dotted border-transparent hover:border-gray-400 transition-all">
              Avalia√ß√µes
            </a>
            <Button
              onClick={cycleTheme}
              variant="ghost"
              size="icon"
              className="text-gray-700 hover:text-gray-900 hover:bg-gray-100"
              title="Mudar tema"
            >
              <Moon className="h-5 w-5" />
            </Button>
            <Button
              onClick={handleGetStarted}
              className="bg-pink-100 text-pink-600 hover:bg-pink-200 font-semibold text-sm px-6 py-2 rounded-full border border-pink-200"
            >
              {isAuthenticated ? "Ir para App" : "Login"}
            </Button>
          </div>
        </div>
      </header>

      {/* Hero Section com Chat Demo */}
      <section className="bg-theme-gradient py-16">
      <main className="container max-w-7xl mx-auto px-4">
        <div ref={heroRef} className="scroll-animate grid lg:grid-cols-2 gap-12 items-center mb-20">
          {/* Left: Headline + CTA */}
          <div className="text-white">
            <h1 className="text-6xl sm:text-7xl lg:text-8xl font-black mb-6 leading-tight">
              Consiga Mais Encontros
            </h1>
            <p className="text-xl sm:text-2xl mb-8 opacity-90">
              Testamos 91.600 mensagens e treinamos nossa IA para conseguir mais encontros.
            </p>
            
            {/* Avatares de usu√°rios */}
            <div className="flex items-center gap-4 mb-8">
              <div className="flex -space-x-3">
                <div className="w-12 h-12 rounded-full border-2 border-white bg-gradient-to-br from-blue-400 to-blue-600 flex items-center justify-center text-white font-bold">
                  M
                </div>
                <div className="w-12 h-12 rounded-full border-2 border-white bg-gradient-to-br from-pink-400 to-pink-600 flex items-center justify-center text-white font-bold">
                  A
                </div>
                <div className="w-12 h-12 rounded-full border-2 border-white bg-gradient-to-br from-purple-400 to-purple-600 flex items-center justify-center text-white font-bold">
                  J
                </div>
                <div className="w-12 h-12 rounded-full border-2 border-white bg-gradient-to-br from-orange-400 to-orange-600 flex items-center justify-center text-white font-bold">
                  L
                </div>
                <div className="w-12 h-12 rounded-full border-2 border-white bg-white/20 backdrop-blur-sm flex items-center justify-center text-white font-bold text-sm">
                  +3
                </div>
              </div>
            </div>
            <p className="text-sm mb-8 opacity-80">
              Junte-se a milhares de usu√°rios satisfeitos ;)
            </p>
            
            <Button
              onClick={() => document.getElementById('avaliacoes')?.scrollIntoView({ behavior: 'smooth' })}
              variant="outline"
              className="bg-white/10 border-2 border-dashed border-green-300 text-white hover:bg-white/20 font-semibold px-8 py-3 rounded-xl"
            >
              Avalia√ß√µes
            </Button>
          </div>

          {/* Right: Chat Demo com c√≠rculos decorativos */}
          <div className="relative">
            {/* C√≠rculos decorativos */}
            <div className="absolute -top-20 -right-20 w-96 h-96 rounded-full bg-gradient-to-br from-orange-400/40 to-orange-500/40 blur-3xl"></div>
            <div className="absolute -top-10 -right-10 w-80 h-80 rounded-full bg-gradient-to-br from-orange-300/30 to-pink-400/30 blur-2xl"></div>
            <div className="absolute top-10 right-10 w-64 h-64 rounded-full bg-gradient-to-br from-pink-300/20 to-orange-300/20 blur-xl"></div>
            
            {/* iPhone Mockup */}
            <div className="relative z-10 mx-auto w-[320px] bg-black rounded-[3rem] p-3 shadow-2xl">
              {/* Notch */}
              <div className="absolute top-0 left-1/2 -translate-x-1/2 w-40 h-7 bg-black rounded-b-3xl z-20"></div>
              
              {/* Screen */}
              <div className="bg-white rounded-[2.5rem] overflow-hidden h-[600px] relative">
                {/* Status Bar */}
                <div className="bg-gray-50 px-6 py-3 flex items-center justify-between text-xs">
                  <span className="font-semibold">9:41</span>
                  <div className="flex items-center gap-1">
                    <div className="w-4 h-3 border border-gray-400 rounded-sm"></div>
                  </div>
                </div>
                
                {/* Chat Header */}
                <div className="bg-white border-b px-4 py-3 flex items-center gap-3">
                  <div className="w-10 h-10 rounded-full bg-gradient-to-br from-pink-400 to-pink-600 flex items-center justify-center text-white font-bold">
                    M
                  </div>
                  <div>
                    <div className="font-bold text-sm">Maria</div>
                    <div className="text-xs text-green-500">Online</div>
                  </div>
                </div>
                
                {/* Messages */}
                <div className="p-4 space-y-4 bg-gray-50 h-[480px]">
                  {/* Mensagem recebida 1 */}
                  <div className="flex justify-start">
                    <div className="bg-white rounded-2xl rounded-tl-sm px-4 py-3 max-w-[75%] shadow-sm">
                      <p className="text-sm text-gray-800">I've heard you've been causing trouble again, Maria</p>
                    </div>
                  </div>
                  
                  {/* Mensagem enviada (IA) */}
                  <div className="flex justify-end">
                    <div className="bg-gradient-to-br from-orange-400 to-orange-500 rounded-2xl rounded-tr-sm px-4 py-3 max-w-[75%] shadow-md">
                      <p className="text-sm text-white font-medium">I've heard you've been causing trouble again, Maria</p>
                    </div>
                  </div>
                  
                  {/* Mensagem recebida 2 */}
                  <div className="flex justify-start">
                    <div className="bg-white rounded-2xl rounded-tl-sm px-4 py-3 max-w-[75%] shadow-sm">
                      <p className="text-sm text-gray-800">causing trouble? Me?</p>
                      <p className="text-xs text-gray-500 mt-1">10:45 a</p>
                    </div>
                  </div>
                  
                  {/* Mensagem enviada 2 (IA) */}
                  <div className="flex justify-end">
                    <div className="bg-gradient-to-br from-blue-500 to-blue-600 rounded-2xl rounded-tr-sm px-4 py-3 max-w-[75%] shadow-md">
                      <p className="text-sm text-white font-medium">Vcs me about that what if none of tha</p>
                    </div>
                  </div>
                  
                  {/* Mensagem enviada 3 (IA) */}
                  <div className="flex justify-end">
                    <div className="bg-gradient-to-br from-orange-500 to-red-500 rounded-2xl rounded-tr-sm px-4 py-3 max-w-[75%] shadow-md">
                      <p className="text-sm text-white font-medium">I know exactly where I'm finding me on our first</p>
                    </div>
                  </div>
                  
                  {/* Input area */}
                  <div className="absolute bottom-4 left-4 right-4 bg-white rounded-full px-4 py-2 flex items-center gap-2 shadow-lg">
                    <span className="text-sm text-gray-400 flex-1">Message</span>
                    <div className="w-6 h-6 rounded-full bg-gray-200"></div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        {/* Social Proof */}
        <div ref={statsRef} className="scroll-animate bg-white/10 backdrop-blur-md rounded-3xl p-8 border border-white/20">
          <div className="grid md:grid-cols-3 gap-8 text-center text-white">
            <div>
              <div className="text-5xl font-black mb-2">10.000+</div>
              <div className="text-lg opacity-90">Mensagens Geradas</div>
            </div>
            <div>
              <div className="text-5xl font-black mb-2">4.9/5</div>
              <div className="text-lg opacity-90 flex items-center justify-center gap-1">
                <Star className="w-5 h-5 fill-yellow-300 text-yellow-300" />
                Avalia√ß√£o M√©dia
              </div>
            </div>
            <div>
              <div className="text-5xl font-black mb-2">95%</div>
              <div className="text-lg opacity-90">Taxa de Sucesso</div>
            </div>
          </div>
        </div>
      </main>
      </section>

      {/* Como Funciona */}
      <section className="bg-white py-16">
      <main className="container max-w-7xl mx-auto px-4">
        <div id="como-funciona" ref={howItWorksRef} className="scroll-animate mb-20">
          <h2 className="text-3xl sm:text-4xl lg:text-5xl font-black text-white text-center mb-12 drop-shadow-xl">
            Como Funciona?
          </h2>
          <div className="grid md:grid-cols-3 gap-8">
            <div className="bg-white rounded-3xl p-8 text-center shadow-2xl transform hover:scale-105 transition-all">
              <div className="w-20 h-20 bg-gradient-to-br from-rose-500 to-pink-600 rounded-full flex items-center justify-center mx-auto mb-6 text-white text-3xl font-bold">
                1
              </div>
              <h3 className="text-xl sm:text-2xl font-bold text-gray-900 mb-4">Cole a Mensagem</h3>
              <p className="text-gray-600 text-lg">
                Copie a mensagem que voc√™ recebeu e cole no app
              </p>
            </div>

            <div className="bg-white rounded-3xl p-8 text-center shadow-2xl transform hover:scale-105 transition-all">
              <div className="w-20 h-20 bg-gradient-to-br from-rose-500 to-pink-600 rounded-full flex items-center justify-center mx-auto mb-6 text-white text-3xl font-bold">
                2
              </div>
              <h3 className="text-xl sm:text-2xl font-bold text-gray-900 mb-4">Escolha o Tom</h3>
              <p className="text-gray-600 text-lg">
                Normal, Safado ou Engra√ßado - voc√™ decide o estilo
              </p>
            </div>

            <div className="bg-white rounded-3xl p-8 text-center shadow-2xl transform hover:scale-105 transition-all">
              <div className="w-20 h-20 bg-gradient-to-br from-rose-500 to-pink-600 rounded-full flex items-center justify-center mx-auto mb-6 text-white text-3xl font-bold">
                3
              </div>
              <h3 className="text-xl sm:text-2xl font-bold text-gray-900 mb-4">Copie e Envie</h3>
              <p className="text-gray-600 text-lg">
                Escolha entre 3 op√ß√µes e mande a melhor resposta
              </p>
            </div>
          </div>
        </div>

        {/* Features com Imagens */}
        <div ref={whyChooseRef} className="scroll-animate mb-20">
          <h2 className="text-3xl sm:text-4xl lg:text-5xl font-black text-white text-center mb-12 drop-shadow-xl">
            Por Que Escolher o Flerte Chat?
          </h2>
          
          {/* Feature 1 */}
          <div className="grid lg:grid-cols-2 gap-12 items-center mb-16">
            <div className="order-2 lg:order-1">
              <img 
                src="/couple-flirting.jpg" 
                alt="Casal flertando" 
                className="rounded-3xl shadow-2xl w-full h-[400px] object-cover"
              />
            </div>
            <div className="text-white order-1 lg:order-2">
              <div className="inline-block bg-rose-600 rounded-full px-4 py-2 mb-4">
                <span className="text-sm font-bold">üî• MAIS POPULAR</span>
              </div>
              <h3 className="text-2xl sm:text-3xl lg:text-4xl font-black mb-6">Respostas que Funcionam de Verdade</h3>
              <p className="text-xl mb-6 opacity-95">
                Nossa IA foi treinada com milhares de conversas reais. Ela entende o contexto e gera 
                respostas naturais que parecem escritas por voc√™.
              </p>
              <ul className="space-y-3">
                <li className="flex items-start gap-3">
                  <Check className="w-6 h-6 text-green-300 flex-shrink-0 mt-1" />
                  <span className="text-lg">100% brasileiro - com g√≠rias e express√µes aut√™nticas</span>
                </li>
                <li className="flex items-start gap-3">
                  <Check className="w-6 h-6 text-green-300 flex-shrink-0 mt-1" />
                  <span className="text-lg">3 op√ß√µes diferentes para cada situa√ß√£o</span>
                </li>
                <li className="flex items-start gap-3">
                  <Check className="w-6 h-6 text-green-300 flex-shrink-0 mt-1" />
                  <span className="text-lg">Gera√ß√£o instant√¢nea em menos de 3 segundos</span>
                </li>
              </ul>
            </div>
          </div>

          {/* Feature 2 */}
          <div className="grid lg:grid-cols-2 gap-12 items-center">
            <div className="text-white">
              <div className="inline-block bg-orange-600 rounded-full px-4 py-2 mb-4">
                <span className="text-sm font-bold">‚ö° SUPER R√ÅPIDO</span>
              </div>
              <h3 className="text-2xl sm:text-3xl lg:text-4xl font-black mb-6">Nunca Mais Deixe no V√°cuo</h3>
              <p className="text-xl mb-6 opacity-95">
                Acabou aquela ansiedade de n√£o saber o que responder. Com o Flerte Chat, 
                voc√™ sempre tem a resposta perfeita na ponta dos dedos.
              </p>
              <ul className="space-y-3">
                <li className="flex items-start gap-3">
                  <Check className="w-6 h-6 text-green-300 flex-shrink-0 mt-1" />
                  <span className="text-lg">Responda em segundos, n√£o em horas</span>
                </li>
                <li className="flex items-start gap-3">
                  <Check className="w-6 h-6 text-green-300 flex-shrink-0 mt-1" />
                  <span className="text-lg">Mantenha a conversa sempre fluindo</span>
                </li>
                <li className="flex items-start gap-3">
                  <Check className="w-6 h-6 text-green-300 flex-shrink-0 mt-1" />
                  <span className="text-lg">Impressione com respostas criativas</span>
                </li>
              </ul>
            </div>
            <div>
              <img 
                src="/couple-texting.jpg" 
                alt="Casal usando celular" 
                className="rounded-3xl shadow-2xl w-full h-[400px] object-cover"
              />
            </div>
          </div>
        </div>

        {/* Depoimentos */}
        <div id="avaliacoes" ref={testimonialsRef} className="scroll-animate mb-20">
          <h2 className="text-3xl sm:text-4xl lg:text-5xl font-black text-white text-center mb-12 drop-shadow-xl">
            O Que Nossos Usu√°rios Dizem
          </h2>
          <div className="grid md:grid-cols-3 gap-8">
            <div className="bg-white rounded-3xl p-8 shadow-2xl">
              <div className="flex gap-1 mb-4">
                {[1,2,3,4,5].map(i => (
                  <Star key={i} className="w-5 h-5 fill-yellow-400 text-yellow-400" />
                ))}
              </div>
              <p className="text-gray-700 mb-6 text-lg">
                "Cara, esse app salvou minha vida! Tava travado numa conversa e o Flerte Chat 
                me deu UMA resposta que fez ela rir demais. Agora a gente t√° saindo üòÇ"
              </p>
              <div className="flex items-center gap-3">
                <div className="w-12 h-12 rounded-full bg-gradient-to-br from-blue-400 to-blue-600 flex items-center justify-center text-white font-bold">
                  R
                </div>
                <div>
                  <div className="font-bold text-gray-900">Rafael, 25</div>
                  <div className="text-sm text-gray-500">S√£o Paulo, SP</div>
                </div>
              </div>
            </div>

            <div className="bg-white rounded-3xl p-8 shadow-2xl">
              <div className="flex gap-1 mb-4">
                {[1,2,3,4,5].map(i => (
                  <Star key={i} className="w-5 h-5 fill-yellow-400 text-yellow-400" />
                ))}
              </div>
              <p className="text-gray-700 mb-6 text-lg">
                "Melhor investimento que fiz! As respostas s√£o t√£o naturais que ningu√©m 
                percebe que foi IA. J√° consegui 3 dates esse m√™s üî•"
              </p>
              <div className="flex items-center gap-3">
                <div className="w-12 h-12 rounded-full bg-gradient-to-br from-purple-400 to-purple-600 flex items-center justify-center text-white font-bold">
                  M
                </div>
                <div>
                  <div className="font-bold text-gray-900">Marcos, 28</div>
                  <div className="text-sm text-gray-500">Rio de Janeiro, RJ</div>
                </div>
              </div>
            </div>

            <div className="bg-white rounded-3xl p-8 shadow-2xl">
              <div className="flex gap-1 mb-4">
                {[1,2,3,4,5].map(i => (
                  <Star key={i} className="w-5 h-5 fill-yellow-400 text-yellow-400" />
                ))}
              </div>
              <p className="text-gray-700 mb-6 text-lg">
                "Eu sou p√©ssima pra flertar por texto, mas com esse app eu pare√ßo 
                profissional! Recomendo demais ‚ù§Ô∏è"
              </p>
              <div className="flex items-center gap-3">
                <div className="w-12 h-12 rounded-full bg-gradient-to-br from-pink-400 to-pink-600 flex items-center justify-center text-white font-bold">
                  C
                </div>
                <div>
                  <div className="font-bold text-gray-900">Carolina, 23</div>
                  <div className="text-sm text-gray-500">Belo Horizonte, MG</div>
                </div>
              </div>
            </div>
          </div>
        </div>

        {/* CTA Final */}
        <div ref={ctaRef} className="scroll-animate text-center bg-white/10 backdrop-blur-md rounded-3xl p-16 border-2 border-white/30 shadow-2xl">
          <h2 className="text-5xl font-black text-white mb-6 drop-shadow-xl">
            Pronto para Impressionar?
          </h2>
          <p className="text-2xl text-white/95 mb-8 max-w-3xl mx-auto">
            Junte-se a milhares de pessoas que j√° est√£o conquistando com mensagens irresist√≠veis. 
            <span className="font-bold"> Comece gr√°tis agora!</span>
          </p>
          <div className="flex flex-col sm:flex-row gap-4 justify-center mb-6">
            <Button
              onClick={handleGetStarted}
              size="lg"
              className="bg-white text-rose-600 hover:bg-gray-100 text-2xl px-16 py-8 font-black shadow-2xl"
            >
              <Sparkles className="w-7 h-7 mr-3" />
              Come√ßar Gr√°tis
            </Button>
          </div>
          <div className="grid grid-cols-1 sm:grid-cols-3 gap-4 mt-8">
            <div className="bg-black/40 backdrop-blur-md rounded-2xl p-4 border border-white/20">
              <p className="text-white font-black text-center text-lg">Sem cart√£o de cr√©dito</p>
            </div>
            <div className="bg-black/40 backdrop-blur-md rounded-2xl p-4 border border-white/20">
              <p className="text-white font-black text-center text-lg">10 mensagens gr√°tis</p>
            </div>
            <div className="bg-black/40 backdrop-blur-md rounded-2xl p-4 border border-white/20">
              <p className="text-white font-black text-center text-lg">Cancele quando quiser</p>
            </div>
          </div>
        </div>
      </main>

      {/* Footer */}
      <footer className="bg-black/30 backdrop-blur-md border-t border-white/20 mt-20">
        <div className="container max-w-7xl mx-auto px-4 py-12">
          <div className="grid grid-cols-1 md:grid-cols-4 gap-8 mb-8">
            {/* Logo e Tagline */}
            <div className="col-span-1 md:col-span-2">
              <div className="flex items-center gap-3 mb-4">
                <img src={APP_LOGO} alt="Logo" className="w-10 h-10 object-contain logo-pulse" />
                <span className="font-bold text-2xl text-white app-title">{APP_TITLE}</span>
              </div>
              <p className="text-white/80 text-lg mb-4" style={{fontWeight: '800'}}>"Sua arma secreta para quebrar o gelo"</p>
              <div className="flex gap-4">
                {/* Redes sociais removidas */}
              </div>
            </div>

            {/* Links */}
            <div>
              <h3 className="text-white font-bold text-lg mb-4">Suporte</h3>
              <ul className="space-y-2">
                <li><a href="mailto:pauloromulo2000k@gmail.com" className="text-white/70 hover:text-white transition-colors">Contato</a></li>
                <li><a href="#avaliacoes" className="text-white/70 hover:text-white transition-colors" onClick={(e) => { e.preventDefault(); document.getElementById('avaliacoes')?.scrollIntoView({ behavior: 'smooth' }); }}>Avalia√ß√µes</a></li>
                <li><a href="/faq" className="text-white/70 hover:text-white transition-colors">Perguntas Frequentes</a></li>
              </ul>
            </div>

            {/* Legal */}
            <div>
              <h3 className="text-white font-bold text-lg mb-4">Legal</h3>
              <ul className="space-y-2">
                <li><a href="/privacy" className="text-white/70 hover:text-white transition-colors">Pol√≠tica de Privacidade</a></li>
                <li><a href="/terms" className="text-white/70 hover:text-white transition-colors">Termos e Condi√ß√µes</a></li>
              </ul>
            </div>
          </div>

          <div className="border-t border-white/20 pt-8 text-center text-white/60">
            <p>¬© 2025 FlerteChat. Todos os direitos reservados.</p>
          </div>
        </div>
      </footer>
      
      {/* Back to Top Button */}
      <BackToTop />
    </div>
  );
}
